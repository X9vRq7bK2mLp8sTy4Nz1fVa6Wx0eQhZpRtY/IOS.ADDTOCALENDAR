<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Add Multiple Events</title>
  </head>
  <body style="display:flex;justify-content:center;align-items:center;height:100vh;font-family:sans-serif;">
    <button id="add" style="font-size:18px;padding:10px 20px;">add multiple events</button>

    <script>
      document.getElementById('add').onclick = () => {
        const now = Date.now();
        const makeEvent = (offsetHours, title) => {
          const start = new Date(now + offsetHours * 3600000).toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
          const end = new Date(now + (offsetHours + 1) * 3600000).toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
          const uid = `${title.replace(/\s+/g, '')}@example.com`;
          return `BEGIN:VEVENT
UID:${uid}
DTSTAMP:${start}
DTSTART:${start}
DTEND:${end}
SUMMARY:${title}
DESCRIPTION:autogenerated event
END:VEVENT`;
        };

        const events = [
          makeEvent(1, 'test event 1'),
          makeEvent(25, 'test event 2'),
          makeEvent(50, 'test event 3'),
          makeEvent(100, 'test event 4')
        ].join('\n');

        const ics = `BEGIN:VCALENDAR
VERSION:2.0
${events}
END:VCALENDAR`;

        const blob = new Blob([ics], { type: 'text/calendar;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        window.location.href = url;
      };
    </script>
  </body>
</html>
